"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[22534],{22657:(e,t,n)=>{n.d(t,{m:()=>o});var s=n(53573),i=n(49639);function o(e){const t=s.Z.parse(e);for(const[n,s]of Object.entries(t))(0,i.isArray)(s)?t[n]=s.join(","):null===s&&delete t[n];return t}},22534:(e,t,n)=>{n.r(t),n.d(t,{Component:()=>Xe,default:()=>Qe,handleHash:()=>Je});var s=n(37305),i=n(53424),o=n(65675),a=n(41418),r=n.n(a),l=n(42543),d=n(763),c=n(4235),h=n(72791),u=n(37325),p=n(78687),m=n(57689),g=n(94500),b=n(71594),v=n(17498),x=n(3047),S=n(32183),C=n(11294),y=n(80184);const E=e=>(0,y.jsx)(x.u,{content:"Heap Size (bytes)",placement:S.Ly.TOP,children:(0,y.jsx)(C.A,{leftIcon:i.d.ArrowsHorizontal,style:{width:100},max:Math.pow(2,31),value:e.heapSize,minorStepSize:null,intent:"primary",onValueChange:e.handleChangeHeapSize})});var j=n(35147),f=n(3515),L=n(96833),I=n(60341),w=n(1309),k=n(90362),F=n(13152),D=n(89702),T=n(99439),N=n(35772),_=n(5136),R=n(95134),O=n(32881),P=n(60363),A=n(60054),M=n(89360),V=n(27156);const U=e=>(0,y.jsx)(x.u,{content:"Execution Time",placement:S.Ly.TOP,children:(0,y.jsx)(C.A,{leftIcon:i.d.TIME,style:{width:80},min:1e3,value:e.execTime,onValueChange:e.handleChangeExecTime})});var B=n(50698),H=n(79037),G=n(68066),z=n(17862);const Z={INACTIVE:B.S.NONE,SAVED:B.S.PRIMARY,DIRTY:B.S.WARNING},Y=e=>{const{isMobileBreakpoint:t}=(0,k.Fs)(),n=e.currentFile?e.isDirty?"DIRTY":"SAVED":"INACTIVE",o=(0,y.jsx)(z.Z,{label:e.currentFile&&e.currentFile.name||"Google Drive",icon:i.d.CLOUD,options:{intent:Z[n]},isDisabled:e.isFolderModeEnabled}),a=(0,y.jsx)(z.Z,{label:"Open",icon:i.d.DOCUMENT_OPEN,onClick:e.onClickOpen}),r=(0,y.jsx)(z.Z,{label:"Save",icon:i.d.FLOPPY_DISK,onClick:e.onClickSave,isDisabled:"INACTIVE"===n}),l=(0,y.jsx)(z.Z,{label:"Save as",icon:i.d.SEND_TO,onClick:e.onClickSaveAs}),d=e.loggedInAs&&(0,y.jsx)(x.u,{content:`Logged in as ${e.loggedInAs}`,children:(0,y.jsx)(z.Z,{label:"Log out",icon:i.d.LOG_OUT,onClick:e.onClickLogOut})}),c=e.isFolderModeEnabled?"Currently unsupported in Folder mode":void 0;return(0,y.jsx)(x.u,{content:c,disabled:void 0===c,children:(0,y.jsx)(G.p,{autoFocus:!1,content:(0,y.jsx)("div",{children:(0,y.jsxs)(H.h,{large:!t,children:[a,r,l,d]})}),onOpening:e.onPopoverOpening,popoverClassName:s.POPOVER_DISMISS,disabled:e.isFolderModeEnabled,children:o})})};var $=n(44805),K=n(722),q=n(78029),J=n(33508),W=n(44439);function X(e){(0,W.N9)(`Could not connect: ${e&&e.message||e||"Unknown error"}`)}class Q extends h.PureComponent{constructor(e){super(e),this.state={joinElemValue:""},this.handleChange=this.handleChange.bind(this),this.inviteInputElem=h.createRef(),this.selectInviteInputText=this.selectInviteInputText.bind(this)}render(){const e=(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("input",{value:this.props.editorSessionId,readOnly:!0,ref:this.inviteInputElem}),(0,y.jsx)(q,{text:""+this.props.editorSessionId,children:(0,y.jsx)(z.Z,{icon:i.d.DUPLICATE,onClick:this.selectInviteInputText})})]}),t=(0,y.jsx)(G.p,{popoverClassName:"Popover-share",inheritDarkTheme:!1,content:e,children:(0,y.jsx)(z.Z,{label:"Invite",icon:i.d.GRAPH,onClick:()=>{""===this.props.editorSessionId&&(0,J.lW)(this.props.getEditorValue()).then((e=>{this.props.handleSetEditorSessionId(e)}),X)}})}),n=(0,y.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(0,J.Ht)(this.state.joinElemValue).then((e=>{e?this.props.handleSetEditorSessionId(this.state.joinElemValue):(this.props.handleSetEditorSessionId(""),(0,W.N9)("Could not find a session with that ID."))}),(e=>{this.props.handleSetEditorSessionId(""),X(e)}))},children:[(0,y.jsx)("input",{type:"text",value:this.state.joinElemValue,onChange:this.handleChange}),(0,y.jsx)("span",{className:s.POPOVER_DISMISS,children:(0,y.jsx)(z.Z,{icon:i.d.KEY_ENTER,options:{type:"submit"}})})]}),o=(0,y.jsx)(G.p,{popoverClassName:"Popover-share",inheritDarkTheme:!1,content:n,children:(0,y.jsx)(z.Z,{label:"Join",icon:i.d.LOG_IN})}),a=(0,y.jsx)(z.Z,{label:"Leave",icon:i.d.FEED,onClick:()=>{this.props.handleSetEditorSessionId(""),this.setState({joinElemValue:""})}}),r=this.props.isFolderModeEnabled?"Currently unsupported in Folder mode":void 0;return(0,y.jsx)(x.u,{content:r,disabled:void 0===r,children:(0,y.jsx)(G.p,{content:(0,y.jsxs)($.v,{large:!0,children:[t,""===this.props.editorSessionId?o:a]}),disabled:this.props.isFolderModeEnabled,children:(0,y.jsx)(z.Z,{label:"Session",icon:i.d.SOCIAL_MEDIA,options:{iconColor:""===this.props.editorSessionId?void 0:this.props.sharedbConnected?K.w.GREEN3:K.w.RED3},isDisabled:this.props.isFolderModeEnabled})})})}selectInviteInputText(){null!==this.inviteInputElem.current&&(this.inviteInputElem.current.focus(),this.inviteInputElem.current.select())}handleChange(e){this.setState({joinElemValue:e.target.value})}}var ee=n(51002),te=n(16499),ne=n(14634),se=n(9631);class ie extends h.PureComponent{constructor(e){super(e),this.selectShareInputText=this.selectShareInputText.bind(this),this.handleChange=this.handleChange.bind(this),this.toggleButton=this.toggleButton.bind(this),this.shareInputElem=h.createRef(),this.state={keyword:"",isLoading:!1}}render(){const e=void 0===this.props.queryString?(0,y.jsx)(ee.x,{children:"Share your programs! Type something into the editor (left), then click on this button again."}):this.props.isSicp?(0,y.jsxs)("div",{children:[(0,y.jsx)("input",{defaultValue:this.props.queryString,readOnly:!0,ref:this.shareInputElem}),(0,y.jsx)(x.u,{content:"Copy link to clipboard",children:(0,y.jsx)(q,{text:this.props.queryString,children:(0,y.jsx)(z.Z,{icon:i.d.DUPLICATE,onClick:this.selectShareInputText})})})]}):(0,y.jsx)(y.Fragment,{children:this.props.shortURL&&"ERROR"!==this.props.shortURL?(0,y.jsxs)("div",{children:[(0,y.jsx)("input",{defaultValue:this.props.shortURL,readOnly:!0,ref:this.shareInputElem}),(0,y.jsx)(x.u,{content:"Copy link to clipboard",children:(0,y.jsx)(q,{text:this.props.shortURL,children:(0,y.jsx)(z.Z,{icon:i.d.DUPLICATE,onClick:this.selectShareInputText})})})]},this.props.shortURL):this.state.isLoading&&"ERROR"!==this.props.shortURL?(0,y.jsx)("div",{children:(0,y.jsx)(te.t,{description:"Generating Shareable Link...",icon:(0,y.jsx)(ne.$,{size:ne.E.SMALL})})}):(0,y.jsxs)("div",{children:[se.Z.urlShortenerBase,"\xa0",(0,y.jsx)("input",{placeholder:"custom string (optional)",onChange:this.handleChange,style:{width:175}}),(0,y.jsx)(z.Z,{label:"Get Link",icon:i.d.SHARE,onClick:()=>{this.props.handleShortenURL(this.state.keyword),this.setState({isLoading:!0})}})]})});return(0,y.jsx)(G.p,{popoverClassName:"Popover-share",inheritDarkTheme:!1,content:e,children:(0,y.jsx)(x.u,{content:"Get shareable link",placement:S.Ly.TOP,children:(0,y.jsx)(z.Z,{label:"Share",icon:i.d.SHARE,onClick:()=>this.toggleButton()})})})}componentDidUpdate(e){this.props.shortURL!==e.shortURL&&this.setState({keyword:"",isLoading:!1})}toggleButton(){this.props.handleGenerateLz&&this.props.handleGenerateLz(),this.props.handleUpdateShortURL(""),this.setState({keyword:"",isLoading:!1})}handleChange(e){this.setState({keyword:e.currentTarget.value})}selectShareInputText(){null!==this.shareInputElem.current&&(this.shareInputElem.current.focus(),this.shareInputElem.current.select())}}const oe=e=>(0,y.jsx)(x.u,{content:"Step Limit",placement:S.Ly.TOP,children:(0,y.jsx)(C.A,{leftIcon:i.d.VERTICAL_BAR_CHART_ASC,style:{width:80},min:500,max:5e3,value:e.stepLimit,stepSize:e.stepSize,onBlur:()=>{var t;null===(t=e.handleOnBlurAutoScale)||void 0===t||t.call(e,Number(e.stepLimit))},onValueChange:e.handleChangeStepLimit})}),ae=({isFolderModeEnabled:e,isSessionActive:t,isPersistenceActive:n,toggleFolderMode:s})=>{const o=t?"Currently unsupported while a collaborative session is active":n?"Currently unsupported while a persistence method is active":(e?"Disable":"Enable")+" Folder mode";return(0,y.jsx)(x.u,{content:o,children:(0,y.jsx)(z.Z,{label:"Folder",icon:i.d.FOLDER_CLOSE,options:{iconColor:e?K.w.BLUE4:void 0},onClick:s,isDisabled:t||n})})},re=e=>{const{isMobileBreakpoint:t}=(0,k.Fs)(),n=e.githubSaveInfo.filePath||"",o=(n.split("\\").pop()||"").split("/").pop()||"",a=void 0!==e.loggedInAs,r=!a,l=a&&""!==n,d=l?o:"GitHub";let c=B.S.NONE;l&&(c=e.isDirty?B.S.WARNING:B.S.PRIMARY);const h=(0,y.jsx)(z.Z,{label:d,icon:i.d.GIT_BRANCH,options:{intent:c},isDisabled:e.isFolderModeEnabled}),u=(0,y.jsx)(z.Z,{label:"Open",icon:i.d.DOCUMENT_OPEN,onClick:e.onClickOpen,isDisabled:r}),p=(0,y.jsx)(z.Z,{label:"Save",icon:i.d.FLOPPY_DISK,onClick:e.onClickSave,isDisabled:r||!l}),m=(0,y.jsx)(z.Z,{label:"Save As",icon:i.d.SEND_TO,onClick:e.onClickSaveAs,isDisabled:r}),g=a?(0,y.jsx)(z.Z,{label:"Log Out",icon:i.d.LOG_OUT,onClick:e.onClickLogOut}):(0,y.jsx)(z.Z,{label:"Log In",icon:i.d.LOG_IN,onClick:e.onClickLogIn}),b=e.isFolderModeEnabled?"Currently unsupported in Folder mode":void 0;return(0,y.jsx)(x.u,{content:b,disabled:void 0===b,children:(0,y.jsx)(G.p,{autoFocus:!1,content:(0,y.jsx)("div",{children:(0,y.jsxs)(H.h,{large:!t,children:[u,p,m,g]})}),popoverClassName:s.POPOVER_DISMISS,disabled:e.isFolderModeEnabled,children:h})})};var le=n(19832),de=n(27448),ce=n(28680),he=n(67643),ue=n.n(he);const pe="FileSystemView_file-system-view-container__jISZG",me="FileSystemView_file-system-view-error__SrF6Z",ge="FileSystemView_file-system-view-empty-space__KfVv+",be="FileSystemView_file-system-view-list-container__9O+ym",ve="FileSystemView_file-system-view-spinner__YBPGb",xe="FileSystemView_file-system-view-directory-node-container__ya2Av",Se="FileSystemView_file-system-view-node-container__GN6ql",Ce="FileSystemView_file-system-view-input__r+WEl",ye="FileSystemView_file-system-view-file-name__-PCmg";var Ee=n(79637),je=n(83236),fe=n(63882),Le=n(23797);const Ie="ContextMenu_context-menu__FXXlu",we="ContextMenu_context-menu-item__c2H+Q",ke=e=>{const{children:t,className:n,createNewFile:i,createNewDirectory:o,open:a,rename:l,remove:d}=e,[c,u]=(0,je.w)(),[p,m]=h.useState({x:0,y:0});return(0,y.jsxs)("div",{className:n,onContextMenu:e=>{e.preventDefault(),m({x:e.clientX,y:e.clientY}),u(!0)},children:[t,(0,y.jsxs)(fe.B,{menuClassName:r()(s.CARD,s.DARK,Ie),...c,anchorPoint:p,onClose:()=>u(!1),children:[i&&(0,y.jsx)(Le.s,{className:we,onClick:i,children:"New File"}),o&&(0,y.jsx)(Le.s,{className:we,onClick:o,children:"New Directory"}),a&&(0,y.jsx)(Le.s,{className:we,onClick:a,children:"Open"}),l&&(0,y.jsx)(Le.s,{className:we,onClick:l,children:"Rename"}),d&&(0,y.jsx)(Le.s,{className:we,onClick:d,children:"Delete"})]})]})},Fe=e=>{const{indentationLevel:t}=e,n={paddingLeft:19*t+"px"};return(0,y.jsx)("div",{style:n})},De=e=>{const{children:t,waitInMsBeforeRender:n}=e,[s,i]=h.useState(!1);return h.useEffect((()=>{const e=setTimeout((()=>i(!0)),n);return()=>clearTimeout(e)}),[n]),s?t:(0,y.jsx)(y.Fragment,{})},Te=e=>{const{workspaceLocation:t,fileSystem:n,basePath:s,fileName:i,isDirectory:o,isEditing:a,setIsEditing:r,refreshDirectory:l}=e,[d,c]=h.useState(i),u=(0,p.I0)(),m=()=>{r(!1),c(i)};return(0,y.jsxs)(y.Fragment,{children:[a&&(0,y.jsx)("input",{type:"text",autoFocus:!0,spellCheck:!1,className:Ce,value:d,onChange:e=>c(e.target.value),onKeyDown:e=>{if("Enter"===e.key){r(!1);const e=ue().join(s,i),a=ue().join(s,d);if(e===a)return;n.exists(a,(s=>{s?(0,Ee.qY)({title:"Unable to rename "+(o?"directory":"file"),contents:(0,y.jsxs)("p",{children:["A file or folder ",(0,y.jsx)("b",{children:d})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>c(i))):n.rename(e,a,(n=>{n&&console.error(n),u(o?(0,D.renameEditorTabsForDirectory)(t,e,a):(0,D.renameEditorTabForFile)(t,e,a)),l()}))}))}else"Escape"===e.key&&m()},onFocus:e=>{const t=e.target.value.lastIndexOf(".");-1!==t?e.target.setSelectionRange(0,t):e.target.select()},onBlur:m}),!a&&(0,y.jsx)("div",{className:ye,children:i})]})},Ne=e=>{const{processFileName:t,removePlaceholder:n}=e,[s,i]=h.useState(""),o=()=>n();return(0,y.jsx)("input",{type:"text",autoFocus:!0,spellCheck:!1,className:Ce,value:s,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.key?(t(s),n()):"Escape"===e.key&&o()},onBlur:o})},_e=e=>{const{workspaceLocation:t,fileSystem:n,basePath:s,directoryName:o,indentationLevel:a,refreshParentDirectory:r}=e,l=ue().join(s,o),[d,c]=h.useState(!1),[u,m]=h.useState(!1),[g,b]=h.useState(!1),[v,x]=h.useState(!1),[S,C]=h.useState(0),E=(0,p.I0)(),j=()=>C((S+1)%2);return(0,y.jsxs)("div",{className:xe,children:[(0,y.jsx)(ke,{createNewFile:()=>{c(!0),b(!0)},createNewDirectory:()=>{c(!0),x(!0)},rename:()=>m(!0),remove:()=>{(0,Ee.pG)({icon:"warning-sign",title:`Are you sure you want to delete '${o}' and its contents?`,contents:(0,y.jsxs)("p",{children:["This will result in all of its contained files & subdirectories being deleted. Once a directory is deleted, its contents cannot be recovered!",(0,y.jsx)("br",{}),(0,y.jsx)("br",{}),(0,y.jsx)("strong",{children:"Do you still want to proceed?"})]}),positiveIntent:"danger",positiveLabel:"Proceed",negativeLabel:"Cancel"}).then((e=>{e&&(E((0,D.removeEditorTabsForDirectory)(t,l)),(0,de.EY)(n,l).then(r))}))},children:(0,y.jsxs)("div",{className:Se,onClick:()=>{u||c(!d)},children:[(0,y.jsx)(Fe,{indentationLevel:a}),d&&(0,y.jsx)(ce.I,{icon:i.d.CHEVRON_DOWN}),!d&&(0,y.jsx)(ce.I,{icon:i.d.CHEVRON_RIGHT}),(0,y.jsx)(Te,{workspaceLocation:t,fileSystem:n,basePath:s,fileName:o,isDirectory:!0,isEditing:u,setIsEditing:m,refreshDirectory:r})]})}),g&&(0,y.jsxs)("div",{className:Se,children:[(0,y.jsx)(Fe,{indentationLevel:a+1}),(0,y.jsx)(ce.I,{icon:i.d.DOCUMENT}),(0,y.jsx)(Ne,{processFileName:e=>{const t=ue().join(s,o,e);n.exists(t,(s=>{s?(0,Ee.qY)({title:"Unable to create file",contents:(0,y.jsxs)("p",{children:["A file or folder ",(0,y.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):n.writeFile(t,"",(e=>{e&&console.error(e),j()}))}))},removePlaceholder:()=>b(!1)})]}),v&&(0,y.jsxs)("div",{className:Se,children:[(0,y.jsx)(Fe,{indentationLevel:a+1}),(0,y.jsx)(ce.I,{icon:i.d.CHEVRON_RIGHT}),(0,y.jsx)(Ne,{processFileName:e=>{const t=ue().join(s,o,e);n.exists(t,(s=>{s?(0,Ee.qY)({title:"Unable to create directory",contents:(0,y.jsxs)("p",{children:["A file or folder ",(0,y.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):n.mkdir(t,777,(e=>{e&&console.error(e),j()}))}))},removePlaceholder:()=>x(!1)})]}),d&&(0,y.jsx)(Oe,{workspaceLocation:t,fileSystem:n,basePath:l,indentationLevel:a+1},S)]})},Re=e=>{const{workspaceLocation:t,fileSystem:n,basePath:s,fileName:o,indentationLevel:a,refreshDirectory:r}=e,[l,d]=h.useState(!1),c=(0,p.I0)(),u=ue().join(s,o),m=()=>{n.readFile(u,"utf-8",((e,n)=>{if(e&&console.error(e),void 0===n)throw new Error("File contents are undefined.");c((0,D.addEditorTab)(t,u,n))}))};return(0,y.jsx)(ke,{open:m,rename:()=>d(!0),remove:()=>{(0,Ee.pG)({icon:"warning-sign",title:`Are you sure you want to delete '${o}'?`,contents:(0,y.jsxs)("p",{children:["Once a file is deleted, it cannot be recovered!",(0,y.jsx)("br",{}),(0,y.jsx)("br",{}),(0,y.jsx)("strong",{children:"Do you still want to proceed?"})]}),positiveIntent:"danger",positiveLabel:"Proceed",negativeLabel:"Cancel"}).then((e=>{e&&n.unlink(u,(e=>{e&&console.error(e),c((0,D.removeEditorTabForFile)(t,u)),r()}))}))},children:(0,y.jsxs)("div",{className:Se,onClick:e=>{2===e.detail&&m()},children:[(0,y.jsx)(Fe,{indentationLevel:a}),(0,y.jsx)(ce.I,{icon:i.d.DOCUMENT}),(0,y.jsx)(Te,{workspaceLocation:t,fileSystem:n,basePath:s,fileName:o,isDirectory:!1,isEditing:l,setIsEditing:d,refreshDirectory:r})]})})},Oe=e=>{const{workspaceLocation:t,fileSystem:n,basePath:s,indentationLevel:i}=e,[o,a]=h.useState(void 0),[r,l]=h.useState(void 0),d=()=>{n.readdir(s,(async(e,t)=>{if(e&&console.error(e),void 0===t)return;const i=[],o=[];await Promise.all(t.map((e=>{const t=ue().join(s,e);return new Promise(((s,a)=>{n.lstat(t,((t,n)=>{if(t)return a(t);void 0!==n&&(n.isFile()?i.push(e):n.isDirectory()&&o.push(e),s(n))}))}))}))),l(i.sort()),a(o.sort())}))};return h.useEffect(d,[n,s]),r&&o?(0,y.jsxs)("div",{className:be,children:[o.map((e=>(0,y.jsx)(_e,{workspaceLocation:t,fileSystem:n,basePath:s,directoryName:e,indentationLevel:i,refreshParentDirectory:d},e))),r.map((e=>(0,y.jsx)(Re,{workspaceLocation:t,fileSystem:n,basePath:s,fileName:e,indentationLevel:i,refreshDirectory:d},e)))]}):(0,y.jsx)(De,{waitInMsBeforeRender:200,children:(0,y.jsx)(ne.$,{className:ve,size:ne.E.SMALL})})},Pe=e=>{const{workspaceLocation:t,basePath:n}=e,s=(0,k.ix)((e=>e.fileSystem.inBrowserFileSystem)),[o,a]=h.useState(!1),[r,l]=h.useState(!1),[d,c]=h.useState(0),u=()=>c((d+1)%2);if(null===s)return(0,y.jsx)("div",{className:me,children:"Unable to load file system."});return(0,y.jsxs)("div",{className:pe,children:[(0,y.jsx)(Oe,{workspaceLocation:t,fileSystem:s,basePath:n,indentationLevel:0},d),o&&(0,y.jsxs)("div",{className:Se,children:[(0,y.jsx)(Fe,{indentationLevel:0}),(0,y.jsx)(ce.I,{icon:i.d.DOCUMENT}),(0,y.jsx)(Ne,{processFileName:e=>{const t=ue().join(n,e);s.exists(t,(n=>{n?(0,Ee.qY)({title:"Unable to create file",contents:(0,y.jsxs)("p",{children:["A file or folder ",(0,y.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):s.writeFile(t,"",(e=>{e&&console.error(e),u()}))}))},removePlaceholder:()=>a(!1)})]}),r&&(0,y.jsxs)("div",{className:Se,children:[(0,y.jsx)(Fe,{indentationLevel:0}),(0,y.jsx)(ce.I,{icon:i.d.CHEVRON_RIGHT}),(0,y.jsx)(Ne,{processFileName:e=>{const t=ue().join(n,e);s.exists(t,(n=>{n?(0,Ee.qY)({title:"Unable to create directory",contents:(0,y.jsxs)("p",{children:["A file or folder ",(0,y.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):s.mkdir(t,777,(e=>{e&&console.error(e),u()}))}))},removePlaceholder:()=>l(!1)})]}),(0,y.jsx)(ke,{className:ge,createNewFile:()=>a(!0),createNewDirectory:()=>l(!0)})]})};var Ae=n(45686),Me=n(39215);const Ve=`\nWelcome to the Source Academy playground!\n\nThe book [_Structure and Interpretation of Computer Programs, JavaScript Edition_](${se.y.textbook})\nuses JavaScript sublanguages that we call [_Source_](${se.y.sourceDocs}). `,Ue=`\n\nIn the editor on the left, you can use the [_Ace keyboard shortcuts_](${se.y.aceHotkeys}) \nand also the [_Source Academy keyboard shortcuts_](${se.y.sourceHotkeys}).\n\n`,Be=(e,t)=>Ve+((e,t)=>{if(e===l.Chapter.FULL_JS)return`However, you have chosen full JavaScript; your program will be run directly using JavaScript strict mode [_(ECMAScript 2021)_](${se.y.ecmaScript_2021}).\n\n<b>Warning:</b> If your program freezes during execution, you can try refreshing the tab. Note that you need to open the browser console (typically by pressing \`F12\`) before using breakpoints.`;if(e===l.Chapter.HTML)return"However, you have chosen HTML, the standard markup language for webpages. Your code will be rendered directly as a HTML document.\n\nJavaScript code can be added to a HTML document using the `<script>` tag; any script errors will be displayed in the output below.\n\n<b>Note:</b> Error messages may differ between browsers, e.g. when using Safari, errors can only be viewed on the browser console itself. Please check the browser console (typically by pressing `F12`) for more detailed errors and warnings.";const n=`${se.y.sourceDocs}source_${e}${t!==l.Variant.DEFAULT&&t!==l.Variant.NATIVE?`_${t}`:""}/`;return`You have chosen the sublanguage [_${(0,R.w$)(e,t)}_](${n}).`})(e,t)+Ue,He=e=>{return t=e.chapter,n=e.variant,Be(t,n);var t,n};var Ge=n(90713),ze=n(22657),Ze=n(32070),Ye=n(18465),$e=n(62629),Ke=n(78922);const qe={goGreen:"h u l k"};async function Je(e,t,n,s,i){var o;const a=(0,ze.m)(e),r=null!==(o=(0,Ge.GA)(a.chap))&&void 0!==o?o:void 0;if(r===l.Chapter.FULL_JS)(0,F.oO)();else if(r===l.Chapter.FULL_TS)(0,F.Ze)();else{var d,h,u,p;if(r===l.Chapter.HTML){if(!await(0,F.zZ)())return}const e=void 0===a.prgrm?"":(0,c.decompressFromEncodedURIComponent)(a.prgrm),o=(0,R.CL)(n),m=void 0===a.files?{[o]:e}:(0,ze.m)((0,c.decompressFromEncodedURIComponent)(a.files));null!==i&&await(0,de.c2)(n,i,m),s((0,D.setFolderMode)(n,!1));const g=null!==(d=(0,Ge.YF)(a.isFolder))&&void 0!==d&&d;s((0,D.setFolderMode)(n,g));const b=null!==(h=null===(u=a.tabs)||void 0===u?void 0:u.split(",").map(c.decompressFromEncodedURIComponent))&&void 0!==h?h:[o];s((0,D.removeEditorTabsForDirectory)(n,$e.z[n])),b.forEach((e=>{var t;return s((0,D.addEditorTab)(n,e,null!==(t=m[e])&&void 0!==t?t:""))}));const v=null!==(p=(0,Ge.GA)(a.tabIdx))&&void 0!==p?p:0;if(s((0,D.updateActiveEditorTabIndex)(n,v)),r){const e=(0,R.C3)(r,a.variant);t.handleChapterSelect(r,e.variant),s((0,_.playgroundConfigLanguage)(e))}const x=Math.max((0,Ge.GA)(a.exec||"1000")||1e3,1e3);x&&t.handleChangeExecTime(x)}}const We=e=>{const{isSicpEditor:t}=e,n=t?"sicp":"playground",{isMobileBreakpoint:a}=(0,k.Fs)(),[c,x]=(0,h.useState)(),S=(0,m.TH)(),C=(0,m.s0)(),F=(0,p.oR)(),B=new URLSearchParams(S.search).get("add_device"),{editorTabs:H,editorSessionId:G,execTime:z,heapSize:Z,stepLimit:$,isEditorAutorun:K,isRunning:q,isDebugging:J,output:W,replValue:X,sharedbConnected:ee,usingSubst:te,usingCse:ne,isFolderModeEnabled:de,activeEditorTabIndex:ce,context:{chapter:he,variant:ue}}=(0,k.ix)((e=>e.workspaces[n])),pe=(0,k.ix)((e=>e.fileSystem.inBrowserFileSystem)),{queryString:me,shortURL:ge,persistenceFile:be,githubSaveInfo:ve}=(0,k.ix)((e=>e.playground)),{sourceChapter:xe,sourceVariant:Se,googleUser:Ce,githubOctokitObject:ye}=(0,k.ix)((e=>e.session)),Ee=(0,p.I0)(),{handleChangeExecTime:je,handleChangeHeapSize:fe,handleChapterSelect:Le,handleEditorValueChange:Ie,handleSetEditorBreakpoints:we,handleReplEval:ke,handleReplOutputClear:Fe,handleUsingSubst:De}=(0,h.useMemo)((()=>({handleChangeExecTime:e=>Ee((0,D.changeExecTime)(e,n)),handleChangeHeapSize:e=>Ee((0,D.changeHeapSize)(e,n)),handleChapterSelect:(e,t)=>Ee((0,D.chapterSelect)(e,t,n)),handleEditorValueChange:(e,t)=>Ee((0,D.updateEditorValue)(n,e,t)),handleSetEditorBreakpoints:(e,t)=>Ee((0,D.setEditorBreakpoint)(n,e,t)),handleReplEval:()=>Ee((0,D.evalRepl)(n)),handleReplOutputClear:()=>Ee((0,D.clearReplOutput)(n)),handleUsingSubst:e=>Ee((0,D.toggleUsingSubst)(e,n))})),[Ee,n]);B&&!c&&(x(B),C(S.pathname,{replace:!0}));const[Te,Ne]=(0,h.useState)(new Date),[_e,Re]=(0,h.useState)(!1),{selectedTab:Oe,setSelectedTab:Ve}=(0,w.__)(n,B?Me.B_.remoteExecution:Me.B_.introduction),[Ue,Be]=(0,h.useState)(!1),[Ge,ze]=(0,h.useState)((()=>{var e,t;return(0,Ye.wH)("playground",{editorValue:null!==(e=null===(t=H[0])||void 0===t?void 0:t.value)&&void 0!==e?e:"",chapter:he})})),We=(0,h.useMemo)((()=>(0,Ke.sd)(c,x)),[c]),Xe=(0,k.ix)((e=>!!e.session.remoteExecutionSession))&&!t,Qe=(0,k.ix)((e=>e.workspaces.playground.externalLibrary));(0,h.useEffect)((()=>{var e,t;ze((0,Ye.wH)("playground",{editorValue:null!==(e=null===(t=H[0])||void 0===t?void 0:t.value)&&void 0!==e?e:"",chapter:he}))}),[G]);const et=t?e.initialEditorValueHash:S.hash;(0,h.useEffect)((()=>{if(et)Je(et,{handleChangeExecTime:je,handleChapterSelect:Le},n,Ee,pe);else if(xe&&Se){Le(xe,Se);const e=(0,R.C3)(xe,Se);Ee((0,_.playgroundConfigLanguage)(e)),Ee((0,D.setFolderMode)(n,!1))}}),[Ee,pe,et,xe,Se,n,Le,je]),(0,h.useEffect)((()=>{Oe&&(a&&Ke.NG.includes(Oe)?Ve(Me.B_.mobileEditor):!a&&Ke.JN.includes(Oe)&&Ve(Me.B_.introduction))}),[a,Oe,Ve]);const tt=(0,h.useMemo)((()=>({goGreen:()=>Re(!_e)})),[_e]),nt=h.useCallback(((e,t)=>{Ne(new Date),Ie(e,t)}),[Ie]),st=(0,h.useCallback)((e=>{(0,Ye.cM)(Ge,e)}),[Ge]),it=(0,h.useMemo)((()=>({handleEditorEval:()=>Ee((0,D.evalEditor)(n)),handleInterruptEval:()=>Ee((0,g.beginInterruptExecution)(n)),handleToggleEditorAutorun:()=>Ee((0,D.toggleEditorAutorun)(n)),handleDebuggerPause:()=>Ee((0,g.beginDebuggerPause)(n)),handleDebuggerReset:()=>Ee((0,g.debuggerReset)(n)),handleDebuggerResume:()=>Ee((0,g.debuggerResume)(n))})),[Ee,n]),ot=(0,k.ix)((e=>e.playground.languageConfig)),at=(0,h.useMemo)((()=>(0,y.jsx)(P.k,{isEntrypointFileDefined:null!==ce,isDebugging:J,isEditorAutorun:K,isRunning:q,autorunDisabled:Xe,sourceChapter:ot.chapter,pauseDisabled:Xe||!(0,R.lq)(ot.chapter),...it},"autorun")),[ce,J,K,q,ot.chapter,it,Xe]),rt=(0,h.useCallback)(((e,t)=>{const{chapter:n,variant:s}=e;(n<=2&&Ue||Oe===Me.B_.substVisualizer)&&De(!0),n>2&&(Fe(),De(!1));const i={time:Date.now(),type:"chapterSelect",data:n};st(i),Le(n,s),Ee((0,_.playgroundConfigLanguage)(e))}),[Ee,Ue,Oe,st,Fe,De,Le]),lt=(0,h.useMemo)((()=>(0,y.jsx)(A.b,{handleChapterSelect:rt,isFolderModeEnabled:de,sourceChapter:ot.chapter,sourceVariant:ot.variant,disabled:Xe},"chapter")),[rt,de,ot.chapter,ot.variant,Xe]),dt=(0,h.useMemo)((()=>Oe===Me.B_.substVisualizer?null:(0,y.jsx)(M._,{handleReplOutputClear:Fe},"clear_repl")),[Fe,Oe]),ct=(0,h.useMemo)((()=>Oe===Me.B_.substVisualizer?null:(0,y.jsx)(V.e,{handleReplEval:ke,isRunning:q},"eval_repl")),[ke,q,Oe]),ht=be&&(!be.lastSaved||be.lastSaved<Te),ut=(0,h.useMemo)((()=>(0,y.jsx)(Y,{isFolderModeEnabled:de,currentFile:be,loggedInAs:Ce,isDirty:ht,onClickSaveAs:()=>Ee((0,N.persistenceSaveFileAs)()),onClickOpen:()=>Ee((0,N.persistenceOpenPicker)()),onClickSave:be?()=>Ee((0,N.persistenceSaveFile)(be)):void 0,onClickLogOut:()=>Ee((0,b.logoutGoogle)()),onPopoverOpening:()=>Ee((0,N.persistenceInitialise)())},"googledrive")),[de,be,Ce,ht,Ee]),pt=ve&&(!ve.lastSaved||ve.lastSaved<Te),mt=(0,h.useMemo)((()=>(0,y.jsx)(re,{isFolderModeEnabled:de,loggedInAs:ye.octokit,githubSaveInfo:ve,isDirty:pt,onClickOpen:()=>Ee((0,T.githubOpenFile)()),onClickSaveAs:()=>Ee((0,T.githubSaveFileAs)()),onClickSave:()=>Ee((0,T.githubSaveFile)()),onClickLogIn:()=>Ee((0,b.loginGitHub)()),onClickLogOut:()=>Ee((0,b.logoutGitHub)())},"github")),[Ee,ye.octokit,pt,ve,de]),gt=(0,h.useMemo)((()=>(0,y.jsx)(U,{execTime:z,handleChangeExecTime:je},"execution_time")),[z,je]),bt=(0,h.useMemo)((()=>(0,y.jsx)(E,{heapSize:Z,handleChangeHeapSize:fe},"heap_size")),[Z,fe]),vt=(0,h.useMemo)((()=>(0,y.jsx)(oe,{stepLimit:$,stepSize:te?2:1,handleChangeStepLimit:e=>{Ee((0,D.changeStepLimit)(e,n)),ne&&Ee((0,D.toggleUpdateCse)(!0,n))},handleOnBlurAutoScale:e=>{Ee(e%2!==0&&te?(0,D.changeStepLimit)(e+1,n):(0,D.changeStepLimit)(e,n)),ne&&Ee((0,D.toggleUpdateCse)(!0,n))}},"step_limit")),[Ee,$,te,ne,n]),xt=(0,h.useCallback)((()=>F.getState().workspaces[n].editorTabs[0].value),[F,n]),St=(0,h.useMemo)((()=>(0,y.jsx)(Q,{isFolderModeEnabled:de,editorSessionId:G,getEditorValue:xt,handleSetEditorSessionId:e=>Ee((0,v.setEditorSessionId)(n,e)),sharedbConnected:ee},"session")),[Ee,xt,de,G,ee,n]),Ct=(0,h.useMemo)((()=>{const n=t?se.y.playground+"#"+e.initialEditorValueHash:me;return(0,y.jsx)(ie,{handleGenerateLz:()=>Ee((0,_.generateLzString)()),handleShortenURL:e=>Ee((0,_.shortenURL)(e)),handleUpdateShortURL:e=>Ee((0,_.updateShortURL)(e)),queryString:n,shortURL:ge,isSicp:t},"share")}),[Ee,t,e.initialEditorValueHash,me,ge]),yt=(0,h.useMemo)((()=>(0,y.jsx)(ae,{isFolderModeEnabled:de,isSessionActive:""!==G,isPersistenceActive:void 0!==be||""!==ve.repoName,toggleFolderMode:()=>Ee((0,D.toggleFolderMode)(n))},"folder")),[Ee,ve.repoName,de,be,G,n]);(0,h.useEffect)((()=>{const e=(0,R.C3)(he,ue);Ee((0,_.playgroundConfigLanguage)(e))}),[Ee,he,ue]);const Et=ot.supports.dataVisualizer,jt=ot.supports.cseMachine,ft=ot.supports.substVisualizer,Lt=(0,h.useMemo)((()=>(0,Ke.EG)(He(ot))),[ot]),It=(0,h.useMemo)((()=>{const e=[Lt];return ot.chapter===l.Chapter.HTML?(W.length>0&&"result"===W[0].type&&e.push((0,L.Z)(W[0],(e=>Ee((0,D.addHtmlConsoleError)(e,n))),n)),e):(Xe||(Et&&e.push((0,f.Z)(n)),jt&&e.push((0,j.Z)(n)),ft&&e.push((0,Ke.a0)(n,W))),t||se.Z.playgroundOnly||e.push(We),e)}),[Lt,ot.chapter,W,Xe,t,Ee,n,Et,jt,ft,We]),wt=[...It].filter((({id:e})=>!(e&&Ke.NG.includes(e)))),kt=(0,h.useCallback)((t=>{const n=()=>{t.getSession().addFold("    ",new o.Range(1,0,e.prependLength,0)),t.renderer.off("afterRender",n)};t.renderer.on("afterRender",n)}),[e.prependLength]),Ft=(0,h.useCallback)(((e,t)=>{const s={time:Date.now(),type:"codeDelta",data:t};st(s),Ee((0,D.toggleUpdateCse)(!0,n)),Ee((0,D.setEditorHighlightedLines)(n,0,[]))}),[st,Ee,n]),Dt=(0,h.useCallback)((e=>{const t={time:Date.now(),type:"cursorPositionChange",data:e.getCursor()};st(t)}),[st]),Tt=(0,h.useCallback)((e=>{const t=e.getRange(),n=e.isBackwards();if(!(0,d.isEqual)(t.start,t.end)){const e={time:Date.now(),type:"selectionRangeData",data:{range:t,isBackwards:n}};st(e)}}),[st]),Nt=(0,h.useCallback)(((e,t)=>{const s=t.filter((e=>!!e)).length;s>0&&(Be(!0),he<=2&&De(!0)),0===s&&(Be(!1),Oe!==Me.B_.substVisualizer&&(Fe(),De(!1))),we(e,t),Ee((0,D.toggleUpdateCse)(!0,n))}),[Oe,Ee,n,we,Fe,De,he]),_t=!ot.supports.repl||Xe,Rt=(0,h.useMemo)((()=>({handleDeclarationNavigate:e=>Ee((0,D.navigateToDeclaration)(n,e)),handlePromptAutocomplete:(e,t,s)=>Ee((0,D.promptAutocomplete)(n,e,t,s)),handleSendReplInputToOutput:e=>Ee((0,D.sendReplInputToOutput)(e,n)),handleSetSharedbConnected:e=>Ee((0,v.setSharedbConnected)(n,e)),setActiveEditorTabIndex:e=>Ee((0,D.updateActiveEditorTabIndex)(n,e)),removeEditorTabByIndex:e=>Ee((0,D.removeEditorTab)(n,e))})),[Ee,n]),Ot={editorSessionId:G,isEditorAutorun:K,editorVariant:"normal",baseFilePath:$e.z[n],isFolderModeEnabled:de,activeEditorTabIndex:ce,setActiveEditorTabIndex:Rt.setActiveEditorTabIndex,removeEditorTabByIndex:Rt.removeEditorTabByIndex,editorTabs:H.map(le.F),handleDeclarationNavigate:Rt.handleDeclarationNavigate,handleEditorEval:it.handleEditorEval,handlePromptAutocomplete:Rt.handlePromptAutocomplete,handleSendReplInputToOutput:Rt.handleSendReplInputToOutput,handleSetSharedbConnected:Rt.handleSetSharedbConnected,onChange:Ft,onCursorChange:Dt,onSelectionChange:Tt,onLoad:t&&e.prependLength?kt:void 0,sourceChapter:ot.chapter,externalLibraryName:Qe,sourceVariant:ot.variant,handleEditorValueChange:nt,handleEditorUpdateBreakpoints:Nt},Pt=(0,h.useMemo)((()=>({handleBrowseHistoryDown:()=>Ee((0,D.browseReplHistoryDown)(n)),handleBrowseHistoryUp:()=>Ee((0,D.browseReplHistoryUp)(n)),handleReplValueChange:e=>Ee((0,D.updateReplValue)(e,n))})),[Ee,n]),At={output:W,replValue:X,handleReplEval:ke,usingSubst:te,handleBrowseHistoryDown:Pt.handleBrowseHistoryDown,handleBrowseHistoryUp:Pt.handleBrowseHistoryUp,handleReplValueChange:Pt.handleReplValueChange,sourceChapter:ot.chapter,sourceVariant:ot.variant,externalLibrary:O.L.NONE,hidden:Oe===Me.B_.substVisualizer||Oe===Me.B_.cseMachine,inputHidden:_t,replButtons:[_t?null:ct,dt],disableScrolling:t},Mt=(0,h.useMemo)((()=>({tabs:[...de?[{label:"Folder",body:(0,y.jsx)(Pe,{workspaceLocation:"playground",basePath:$e.z[n]}),iconName:i.d.FOLDER_CLOSE,id:Me.B_.folder}]:[]]})),[de,n]),Vt={controlBarProps:{editorButtons:[at,ot.chapter===l.Chapter.FULL_JS?null:Ct,lt,ot.chapter===l.Chapter.GO_1?bt:null,t?null:St,ot.supports.multiFile?yt:null,Xe||!(0,R.lq)(ot.chapter)?null:te||ne?vt:gt]},editorContainerProps:Ot,handleSideContentHeightChange:(0,h.useCallback)((e=>Ee((0,I.changeSideContentHeight)(e,n))),[Ee,n]),replProps:At,sideBarProps:Mt,sideContentProps:{selectedTabId:Oe,tabs:{beforeDynamicTabs:It,afterDynamicTabs:[]},workspaceLocation:n},sideContentIsResizeable:Oe!==Me.B_.substVisualizer&&Oe!==Me.B_.cseMachine},Ut={editorContainerProps:Ot,replProps:At,sideBarProps:Mt,mobileSideContentProps:{mobileControlBarProps:{editorButtons:[at,lt,ot.chapter===l.Chapter.FULL_JS?null:Ct,t?null:St,ot.supports.multiFile?yt:null,ut,mt]},selectedTabId:Oe,onChange:Ve,tabs:{beforeDynamicTabs:wt,afterDynamicTabs:[]},workspaceLocation:n}};return a?(0,y.jsx)("div",{className:r()("Playground",s.DARK,_e?"GreenScreen":void 0),children:(0,y.jsx)(Ae.Z,{...Ut})}):(0,y.jsx)(u.HotKeys,{className:r()("Playground",s.DARK,_e?"GreenScreen":void 0),keyMap:qe,handlers:tt,children:(0,y.jsx)(Ze.Z,{...Vt})})},Xe=We;Xe.displayName="Playground";const Qe=We}}]);
//# sourceMappingURL=22534.e04ccd98.chunk.js.map